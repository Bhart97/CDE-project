{
	"AWSTemplateFormatVersion" : "2010-09-09",
	
    "Description": "CloudFormation template for creating an EC2 instance",
	
    "Parameters": {
        "KeyName": {
            "Description": "Name of an existing EC2 KeyPair to enable SSH access to the instance",
            "Type": "AWS::EC2::KeyPair::KeyName",
            "ConstraintDescription" : "must be the name of an existing EC2 KeyPair."
        },
        "VPC": {
            "Type": "AWS::EC2::VPC::Id",
            "Default": "id of existing VPC"
        },
        "Subnet": {
            "Type": "AWS::EC2::Subnet::Id",
            "Default": "id of existing subnet"
        },
        "InstanceType": {
            "Description": "WebServer EC2 instance type",
            "Type": "String",
            "Default": "t2.micro",
            "AllowedValues": [
                "t2.micro",
                "t2.small",
                "t2.medium"
            ],
			"ConstraintDescription" : "must be a valid EC2 instance type."
        },
        "SecurityGroup": {
            "Type": "AWS::EC2::SecurityGroup::Id",
            "Default": "id of existing security group"
        }
    },
    "Resources": {
        "Server": {
            "Type": "AWS::EC2::Instance",
            "Properties": {
                "ImageId": "ami-0a8b4cd432b1c3063",
                "InstanceType": { "Ref": "InstanceType" },
                "KeyName": { "Ref": "KeyName" },
                "SecurityGroupIds": [
                    { "Ref": "SecurityGroup" }
                ],
                "SubnetId": { "Ref": "Subnet" }
            }
        }
    },
    "Outputs": {
        "PublicName": {
            "Value": {
                "Fn::GetAtt": [
                    "Server",
                    "PublicDnsName"
                ]
            },
            "Description": "Public name (connect via SSH)"
        }
    }
}